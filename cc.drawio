<mxfile host="app.diagrams.net" modified="2022-04-02T08:05:47.349Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.82 Safari/537.36" etag="fo7zgfaPoznTZ_v1RoKq" version="17.2.4" type="github">
  <diagram id="C9Syprw9jZbZXscB6EK8" name="cc draw process">
    <mxGraphModel dx="1038" dy="579" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-1" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="50" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-2" value="&lt;h1&gt;Heading&lt;/h1&gt;&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="60" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-3" value="RenderSuface" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="110" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-4" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="180" y="130" as="sourcePoint" />
            <mxPoint x="270" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-5" value="ClipRect = (20,100, 200, 100)&lt;br&gt;BlendMode: SrcOver&lt;br&gt;RoundedRect = 50%&lt;br&gt;ID: 0xab" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="280" y="70" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-6" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="320" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-7" value="&lt;h1&gt;Heading&lt;/h1&gt;&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="330" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-9" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="110" as="sourcePoint" />
            <mxPoint x="580" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-10" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="400" as="sourcePoint" />
            <mxPoint x="260" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-11" value="ClipRect" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="380" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-12" value="ClipRect，相对于目标画布的有效作图区域，只有在这个区域的纹理才能改变，对于 GL 来说就是一个 scissor&lt;br&gt;&lt;br&gt;Transform: 目标纹理最开始的位置是 0,0，经过这个矩阵转移到目标画布的最后的位置，并且包括了 scale&lt;br&gt;&lt;br&gt;ResourceID: 通过id拿到 gl 的纹理 id，直接操作纹理&lt;br&gt;&lt;br&gt;blendMode：混合模式" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="270" y="310" width="230" height="190" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-13" value="ClipRect = (0, 0, 0, 0)&lt;br&gt;BlendMode: SrcOver&lt;br&gt;ID: 0xab" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="580" y="80" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-14" value="明白了 ClipRect 的存在，你才知道，为什么可以做 Center-crop，只需要修改 tranform，因为 clipRect 没有变，纹理放大，在平移，最后被 clip，&lt;b&gt;看起来不就是这个效果吗？&lt;/b&gt;&lt;br&gt;&lt;br&gt;同样，你才明白，为什么 cc 做滚动只需要修改 scrolloffset，因为最后它就是作用在了这个 transform 之上，所以对于需要重新 raster 的，cc 是处理不来的，因为它只能改到这个 offset&lt;br&gt;&lt;br&gt;因为如此，所以 cc 关键就是判断这个 layer 可以不可以直接修改 tranform 呢？这个 layer 是否可以单独处理滚动的手势呢？这是非常重要一点。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="540" y="310" width="330" height="190" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-15" value="RenderSurface 其实就是临时的绘制区域，只有它的存在，才能完成二次圆角，但是 RS 会有自己的空间，注意看这里的 cliprect 已经不存在了，因为最后不需要它来处理裁剪，RS 画的时候自然会被裁剪掉。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="535" y="170" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-16" value="Target Surface" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="610" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-17" value="texture" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="550" y="540" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-18" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="250" y="720" as="sourcePoint" />
            <mxPoint x="340" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-19" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="610" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-20" value="ClipRect" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="410" y="680" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-22" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="590" y="720" as="sourcePoint" />
            <mxPoint x="680" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-23" value="+" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="670" y="555" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-24" value="Transform" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="690" y="555" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-25" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="610" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-26" value="ClipRect" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="740" y="680" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-27" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="725" y="640" width="155" height="110" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-28" value="ClipRect" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="740" y="670" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-29" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="930" y="720" as="sourcePoint" />
            <mxPoint x="1020" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-30" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1050" y="610" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-31" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1080" y="680" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-32" value="ClipRect" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="260" y="695" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K8FTsf_NJZ-UPcorzu2G-33" value="如果 Texture 本身就可以画圆角&lt;br&gt;那么就是 FastBorderRadius" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=0;" parent="1" vertex="1">
          <mxGeometry x="870" y="545" width="220" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
